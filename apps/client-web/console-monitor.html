<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Console Monitor</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Courier New', monospace; background: #1e1e1e; color: #d4d4d4; }
        #console { height: 100vh; overflow-y: auto; padding: 10px; background: #252526; white-space: pre-wrap; word-wrap: break-word; }
        .log { color: #d4d4d4; margin: 2px 0; }
        .error { color: #f48771; background: #3d2626; padding: 2px 4px; }
        .warn { color: #dcdcaa; background: #3d3d26; padding: 2px 4px; }
        .info { color: #4ec9b0; }
        .debug { color: #9cdcfe; }
        .group-label { color: #007acc; font-weight: bold; margin-top: 8px; }
        .group-content { margin-left: 20px; }
    </style>
</head>
<body>
    <div id="console"></div>
    <script>
        const consoleDiv = document.getElementById('console');
        const logs = [];
        
        // Intercept console methods
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        const originalInfo = console.info;
        const originalDebug = console.debug;
        
        function formatMessage(args) {
            return Array.from(args).map(arg => {
                if (typeof arg === 'object') {
                    try { return JSON.stringify(arg, null, 2); }
                    catch { return String(arg); }
                }
                return String(arg);
            }).join(' ');
        }

        function addLog(type, args) {
            const msg = formatMessage(args);
            const entry = document.createElement('div');
            entry.className = `log ${type}`;
            entry.textContent = `[${type.toUpperCase()}] ${msg}`;
            consoleDiv.appendChild(entry);
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        }

        console.log = function(...args) {
            originalLog.apply(console, args);
            addLog('log', args);
        };
        console.error = function(...args) {
            originalError.apply(console, args);
            addLog('error', args);
        };
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addLog('warn', args);
        };
        console.info = function(...args) {
            originalInfo.apply(console, args);
            addLog('info', args);
        };
        console.debug = function(...args) {
            originalDebug.apply(console, args);
            addLog('debug', args);
        };

        // Capture global errors
        window.addEventListener('error', (evt) => {
            addLog('error', [`GLOBAL ERROR: ${evt.message} at ${evt.filename}:${evt.lineno}`]);
        });

        window.addEventListener('unhandledrejection', (evt) => {
            addLog('error', [`UNHANDLED REJECTION: ${evt.reason}`]);
        });

        console.log('üîç Console monitor initialized');
        console.log('üìç Loading main app...');
    </script>
    <!-- Load the main app -->
    <script type="module">
        import('/src/main.tsx').catch(err => {
            console.error('Failed to load main app:', err);
        });
    </script>
</body>
</html>
